@model gad_checa_gestion_cementerio.Models.Listas.DifuntoPaginadaViewModel

@if (Model.Difuntos != null && Model.Difuntos.Any())
{
    <table class="table table-hover mb-0">
        <thead class="table-light">
            <tr>
                <th scope="col" class="text-uppercase small fw-bold">Id</th>
                <th scope="col" class="text-uppercase small fw-bold">Identificación</th>
                <th scope="col" class="text-uppercase small fw-bold">Nombres</th>
                <th scope="col" class="text-uppercase small fw-bold">Fecha Fallecimiento</th>
                <th scope="col" class="text-uppercase small fw-bold">Ubicación</th>
                <th scope="col" class="text-uppercase small fw-bold">Contrato</th>
                <th scope="col" class="text-uppercase small fw-bold">Estado</th>
                <th scope="col" class="text-end text-uppercase small fw-bold">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Difuntos)
            {
                <tr>
                    <td>@item.Id</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-id-card text-primary me-2"></i>
                            <span>@item.NumeroIdentificacion</span>
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-user text-primary me-2"></i>
                            <span>@item.Nombres @item.Apellidos</span>
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-calendar-alt text-primary me-2"></i>
                            <span>@(item.FechaFallecimiento?.ToString("dd/MM/yyyy") ?? "No registrada")</span>
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-map-marker-alt text-primary me-2"></i>
                            <span>
                                @item.Boveda?.Piso?.Bloque?.Descripcion -
                                Piso @item.Boveda?.Piso?.NumeroPiso -
                                Bóveda @item.Boveda?.Numero
                            </span>
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <i class="fas fa-file-contract text-primary me-2"></i>
                            <span>@item.Contrato?.NumeroSecuencial</span>
                        </div>
                    </td>
                    <td>
                        @if (item.Contrato?.FechaFin == null || item.Contrato.FechaFin > DateTime.Now)
                        {
                            <span class="badge bg-success">
                                <i class="fas fa-check-circle me-1"></i>Activo
                            </span>
                        }
                        else
                        {
                            <span class="badge bg-warning">
                                <i class="fas fa-clock me-1"></i>Por Vencer
                            </span>
                        }
                    </td>
                    <td class="text-end">
                        <div class="btn-group">
                            <a class="btn btn-sm btn-outline-primary" asp-action="Details" asp-route-id="@item.Id"
                                title="Ver detalles">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a class="btn btn-sm btn-outline-secondary" asp-action="Edit" asp-route-id="@item.Id"
                                title="Editar">
                                <i class="fas fa-edit"></i>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="py-2">
        <p class="text-muted mb-0">No hay registros de difuntos disponibles.</p>
    </div>
}
