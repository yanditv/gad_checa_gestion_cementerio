@model gad_checa_gestion_cementerio.Models.Listas.BovedaPaginadaViewModel

@{
    var filtroActual = Model.Filtro ?? "";
}

<div class="modal fade" id="modalBovedas" tabindex="-1" aria-labelledby="modalBovedasLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-light border-0">
                <h5 class="modal-title fw-bold" id="modalBovedasLabel">
                    <i class="ti ti-building-bank text-primary me-2"></i>Seleccionar Bóveda
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body p-4">
                <div class="row g-2 align-items-center mb-4">
                    <div class="col-md-6">
                        <div class="input-group">
                            <span class="input-group-text bg-light border-end-0">
                                <i class="ti ti-search text-muted"></i>
                            </span>
                            <input type="text" name="filtro" id="filtroBoveda"
                                class="form-control form-control-sm border-start-0"
                                placeholder="Buscar por Nro. Secuencial" value="@filtroActual" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <select id="tipoBoveda" class="form-select form-select-sm">
                            <option value="">Todos los tipos</option>
                            <option value="Bovedas">Bóveda</option>
                            <option value="Nichos">Nicho</option>
                        </select>
                    </div>
                    <div class="col-md-3 text-end">
                        <button type="button" class="btn btn-primary w-100" onclick="buscarBovedasJson(1)">
                            <i class="ti ti-search me-1"></i>Buscar
                        </button>
                    </div>
                </div>
                <div class="table-responsive mb-3">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th><i class="ti ti-hash text-primary"></i> Nro. Secuencial</th>
                                <th><i class="ti ti-numbers text-primary"></i> Número</th>
                                <th><i class="ti ti-building text-primary"></i> Tipo</th>
                                <th><i class="ti ti-checkup-list text-primary"></i> Estado</th>
                                <th class="text-end">Acción</th>
                            </tr>
                        </thead>
                        <tbody id="tablaBovedasBody">
                            @foreach (var boveda in Model.Bovedas)
                            {
                                <tr>
                                    <td class="fw-semibold">@boveda.NumeroSecuencial</td>
                                    <td>@boveda.Numero</td>
                                    <td>
                                        <span
                                            class="badge bg-info-subtle text-info fw-normal">@boveda.Piso.Bloque.Tipo</span>
                                    </td>
                                    <td>
                                        @if (boveda.Estado)
                                        {
                                            <span class="badge bg-success-subtle text-success">Activa</span>
                                        }
                                        else
                                        {
                                            <span class="badge bg-danger-subtle text-danger">Inactiva</span>
                                        }
                                    </td>
                                    <td class="text-end">
                                        <button type="button" class="btn btn-outline-success btn-sm px-3"
                                            onclick="seleccionarBoveda(@boveda.Id, '@boveda.NumeroSecuencial')">
                                            <i class="ti ti-hand-point-right me-1"></i> Seleccionar
                                        </button>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div id="paginacionBovedas" class="mb-3">
                    <!-- Se generará vía JS -->
                </div>
                <div class="text-end">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="ti ti-x"></i> Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .modal-content {
            border-radius: 1rem;
        }

        .table th,
        .table td {
            vertical-align: middle;
        }

        .badge.bg-info-subtle {
            background: #e7f3fa;
            color: #0dcaf0;
        }

        .badge.bg-success-subtle {
            background: #e9fbe7;
            color: #198754;
        }

        .badge.bg-danger-subtle {
            background: #fbe7e7;
            color: #dc3545;
        }
    </style>
}
