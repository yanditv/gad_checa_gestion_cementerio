@model gad_checa_gestion_cementerio.Models.Listas.BovedaPaginadaViewModel

@{
    var filtroActual = Model.Filtro ?? "";
}

<div class="modal fade" id="modalBovedas" tabindex="-1" aria-labelledby="modalBovedasLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalBovedasLabel">Seleccionar Bóveda</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <div class="input-group mb-3">
                    <input type="text" name="filtro" id="filtroBoveda" class="form-control"
                        placeholder="Buscar por Nro. Secuencial" value="@filtroActual" />
                    <select id="tipoBoveda" class="form-select" style="max-width: 150px;">
                        <option value="">Todos los tipos</option>
                        <option value="Bovedas">Bóveda</option>
                        <option value="Nichos">Nicho</option>
                    </select>
                    <button type="button" class="btn btn-primary" onclick="buscarBovedasJson(1)">Buscar</button>
                </div>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Nro. Secuencial</th>
                            <th>Número</th>
                            <th>Tipo</th>
                            <th>Estado</th>

                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="tablaBovedasBody">
                        @foreach (var boveda in Model.Bovedas)
                        {
                            <tr>
                                <td>@boveda.NumeroSecuencial</td>
                                <td>@boveda.Numero</td>
                                <td>@boveda.Piso.Bloque.Tipo</td>
                                <td>@(boveda.Estado ? "Activa" : "Inactiva")</td>
                                <td>
                                    <button type="button" class="btn btn-success btn-sm"
                                        onclick="seleccionarBoveda(@boveda.Id, '@boveda.NumeroSecuencial')">
                                        Seleccionar
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                <div id="paginacionBovedas">
                    <!-- Se generará vía JS -->
                </div>

                <div class="text-end">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
</div>
